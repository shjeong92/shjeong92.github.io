---
layout: article
title: "RESTful API에 관하여"
tags: REST RESTful API HTTP SOAP
---
본 포스트는 ["그런 REST API로 괜찮은가"](https://www.youtube.com/watch?v=RP_f5dMoHFc)라는 이응준님의 발표를 보고 정리한 내용입니다.

최근 여러 면접에서 RESTful API가 무엇이라고 생각하는가? 에 대한 질문은 어딜 가던지 물어보았습니다 
구글링을 통해서 얻은 답을 했었는데 이게 다가 아닌것 같은 느낌.. 그러다가 지인한테 RESTful API가 뭐라고생각하냐고 물으면 뭐라 답할것인가 물었더니 이 영상을 추천해 주시더군요 ㅎㅎㅎ RESTful API의 탄생배경부터 로이필딩에 관한 이야기까지 정말 재미있게 봤습니다.

### REST란

**RE**presentational

**S**tate

**T**ransfer

의 약자라고 하는데요, 이것만 봐선 도무지 뭔지 모르겠네요..

### REST의 출현 계기

REST는 웹으로 부터 시작되었습니다. www가 팀 버너스 리에 의해 탄생 되었는데요. 하나의 고민이 있었죠

#### 팀 버너스리의 고민(1991)

***어떻게 인터넷에서 정보를 공유할 것인가?***

- **모든 정보들을 하이퍼 텍스트로 연결**
  - 표현방식: HTML
  - 식별자: URI
  - 전송 방법: HTTP

#### HTTP/1.0 (1994-1996)

**로이필딩**이 HTTP개발에 참여하였고

***어떻게 웹을 망가 뜨리지 않고 HTTP를 진보시킬까?*** 라는 고민을 하였는데요,

로이는 고민 끝에 HTTP Object Model이라는 것을 만들었습니다. 이는 4년 후 "Representational State Transfer: An Architectural Style for Distributed Hypermedia interaction"에서 REST를 최초로 공개 하였는데요. 이후 2년 후, "Architectural Styles and the Design of Network-based Software Architectures"을 박사 논문으로 발표하게 되었고, 이 박사 논문이 바로 그 REST라는 것을 정의한느 논문입니다.


#### API(1998)
그런 한편, API라는 것이 있는데요. 98년에 마이크로소프트에서 원격으로 다른 시스템에 메소드를 호출할 수 있는 XML-RPC( 1998) 프로토콜을 만들었습니다. 

이는 곧 SOAP이라는 이름으로 바뀌고, **Salesforce**라는 회사가 인터넷에서 최초로 공개하게 되었는데 장사가 잘 되지 않았죠. 
당시 SOAP을 사용해서 api를 만들었는데 단순한 요청임에도 아래와 같이 상당히 복잡한 것을 알 수 있습니다.

~~~xml
<?xml version="1.0", encoding="utf-8">
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"
  xmlns:urn="urn:enterprise.soap.sforce.com">
  <soapenv:Header>
    <urn:SessionHeader>
      <urn:sessionId><b>QwWsHJyTPW.1pd0_jXlNKOSU</b></urn:sessionId>
    </urn:SessionHeader>
  </soapenv:Header>
  <soapenv:Body>
      <urn:fieldList><b>Id, Name, Website</b></urn:fieldList>
      <urn:sObjectType><b>Account</b></urn:sObjectType>
      <!--Zero or more repetitions:-->
      <urn:ids><b>001D000000HS2Su</b></urn:ids>
      <urn:ids><b>001D000000HRzKD</b></urn:ids>
    </urn:retrieve>
  </soapenv:Body>
</soapenv:Envelope>
~~~

너무 복잡하여 **Salesforce**의 api는 많이 쓰이지 않게 됩니다. 그리고 **flickr**에서 SOAP을 사용하여 API를 발표하는데 아래와 훨씬 간단해 졌습니다.

~~~xml
<s:Envelope xmlns:s="http://www.w3.org/2001/06/soap-envelope>"
  <s.Body>
    <s.Fault>
      <faultcode>flickr.error.[error-code]</faultcode>
      <faultstring>[error-message]</faultstring>
      <faultactor>http://www.flickr.com/services/soap/</faultactor>
      <details>Please see http://flickr.com/services/docs/ for more details</details>
    </s.Fault>
  </s.Body>
</s:Envelope>
~~~

그 이후 로이 필딩이 논문을 바탕으로 REST를 발표하는데

~~~xml
<rsp stat="fail">
  <err code="[error-code]" msg="[error-message]"/>
</rsp>
~~~

딱 보더라도 훨씬 짧고, SOAP에 비해서 단순하며 규칙도 적으며 쉽다고 느끼게 되었습니다.
많은 사람들이 SOAP에서 REST로 갈아타게 됩니다.

![rest-graph](https://user-images.githubusercontent.com/75003424/125241701-bdf2cb00-e326-11eb-9314-9e8085d2417d.png)


또한, 2006년에 AWS가 자사 API의 사용량의 85%가 REST임을 밝혔고,

2010년에 Salesforce.com또한 REST API를 추가했습니다.

이렇게 WWW의 API가 REST로 정착이 되나 싶었지만...


#### CMIS(2008)
  - IBM, 마이크로소프트등의 기업들이 함께 작업했고, REST를 지원한다고 발표했으나
  - REST를 만든 장본인 로이필딩은 **"CMIS에는 REST가 없다"** 라고 말을했죠



#### Microsoft REST API Guidelines(2016)

2016년에는 MS에서 API 가이드라인을 만들었는데요
uri는 https://{serviceRoot}/{collection}/{id} 형식이어야한다
GET, PUT, DELETE, POST, HEAD, PATCH, OPTIONS를 지원해야한다
API 버저닝은 Major.minor로 하고 uri에 버전 정보를 포함시킨다.

제가 개념으로 알고 있었던 REST API인.. 내막은 몰랐던것인데

로이 필딩은 여기다대고 **"이것 또한 REST 아님!"** 이라고 트위터에 적었고,
블로그에 `"REST APIs must be hypertext-driven"`이라고 적었으며, 
`"the best practice for versioning an API is: “Don’t”`을 덧 붙였죠.

사람들이(저를 포함) 알고 있던 REST API와 제작자인 로이의 REST API는 너무나도 다르네요!

무엇이 문제였고, 왜 이런 차이가 났는지 알아봅시다.


### REST API란?
